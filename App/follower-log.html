<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>SexyFishHorse Follower log</title>
    <link rel="stylesheet" href="components/foundation/css/foundation.css"/>
    <link rel="stylesheet" href="styles/topbarOverride.css"/>
    <link rel="stylesheet" href="styles/sfhStyle.css" />
    <link rel="stylesheet" href="styles/follower-log.css" />
    <script src="components/jquery/dist/jquery.min.js"></script>
    <script src="components/foundation/js/vendor/modernizr.js"></script>
    <script src="components/foundation/js/foundation.min.js"></script>
    <script src="components/moment/min/moment-with-locales.min.js"></script>
    <script src="scripts/url-utils.js"></script>
    <script src="scripts/hitbox-follower-api-client.js"></script>
    <script src="scripts/twitch-follower-api-client.js"></script>
</head>
<body>
<div id="follower-log" class="">
    <div class="row fullWidth headers">
        <div class="column small-3 large-2 header provider">Provider</div>
        <div class="column small-4 large-2 header date">Date</div>
        <div class="column small-5 large-8 header username">Username</div>
    </div>
    <div id="list">
    </div>
</div>
<script>
    $(function ()
    {
        $(document).foundation();

        var twitchChannelName = getUrlParameterValue('twitchChannelName');
        var hitboxChannelName = getUrlParameterValue('hitboxChannelName');

        listenForNewTwitchFollowers(twitchChannelName, newFollower);
        listenForNewHitboxFollowers(hitboxChannelName, newFollower);

        function newFollower(follower)
        {
            $('<div class="row fullWidth entry entry' + follower.provider + '">' +
            '<div class="columns small-3 large-2 provider">' + follower.provider + '</div>' +
            '<div class="columns small-4 large-2 date">' + moment().format('LTS') + '</div>' +
            '<div class="columns small-5 large-8 username">' + follower.user + '</div>' +
            '</div>').hide().prependTo('#follower-log #list').slideDown('slow');
        }
    });
</script>
</body>
</html>
